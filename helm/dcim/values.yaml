# Default values for dcim Helm chart.
# This file declares all available configuration keys with their defaults.
# Override with environment-specific values files (values.dev.yaml, etc.)

# Global settings
global:
    environment: dev  # dev | staging | prod
    imageRegistry: ""

# Application (Next.js)
app:
    image:
        repository: dc-infra-map
        tag: latest
        pullPolicy: IfNotPresent
    replicas: 1
    service:
        type: NodePort
        port: 3000
        nodePort: 30300
    ingress:
        enabled: true
        host: dcim-dev.local
        tls:
            enabled: false
            secretName: ""
        annotations:
            # Extend timeouts for SSE (Server-Sent Events) used by power monitoring
            nginx.ingress.kubernetes.io/proxy-read-timeout: "3600"
            nginx.ingress.kubernetes.io/proxy-send-timeout: "3600"
            # Allow larger request bodies for Excel/CSV import
            nginx.ingress.kubernetes.io/proxy-body-size: "50m"
    resources:
        requests:
            cpu: "100m"
            memory: "256Mi"
        limits:
            cpu: "500m"
            memory: "512Mi"
    env:
        NODE_ENV: "development"
        NEXTAUTH_URL: "http://dcim-dev.local"
        TIMESCALEDB_ENABLED: "true"
        NEXT_TELEMETRY_DISABLED: "1"
    secrets:
        AUTH_SECRET: "dev-secret-change-in-production"
        ADMIN_EMAIL: "admin@dcim.local"
        ADMIN_PASSWORD: "dev-admin-password"
        SMTP_HOST: ""
        SMTP_PORT: "587"
        SMTP_USER: ""
        SMTP_PASS: ""
        SMTP_FROM: "dcim@company.com"

# PostgreSQL (TimescaleDB)
postgres:
    image:
        repository: timescale/timescaledb
        tag: 2.17.2-pg17
        pullPolicy: IfNotPresent
    service:
        port: 5432
    storage:
        size: 10Gi
        storageClass: ""
    credentials:
        database: dcim
        username: dcim_user
        password: "dev-password"
    resources:
        requests:
            cpu: "100m"
            memory: "256Mi"
        limits:
            cpu: "500m"
            memory: "512Mi"

# Namespace
namespace:
    name: dcim
    create: true
